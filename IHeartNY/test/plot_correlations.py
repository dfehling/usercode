from ROOT import *

gStyle.SetOptStat(000000)
gStyle.SetPaintTextFormat( '.2f' )

labels = ['beta_signal', 'btag', 'jec', 'jer', 'lumi', 'rate_nonsemi', 'rate_st', 'rate_vjets', 'toptag']

cov = [[  1.49775757e-02,  -2.75927577e-03,  -2.21909335e-02,
          7.33044471e-03,  -3.77938655e-02,  -3.79822153e-02,
         -2.47373108e-02,  -3.31411276e-03,  -1.94640684e-02],
       [ -2.75927577e-03,   4.05992562e-01,  -2.30382276e-02,
          2.42621879e-02,   4.14370410e-02,   2.50398586e-02,
          1.79247155e-01,   2.81771097e-02,   1.25442406e-02],
       [ -2.21909335e-02,  -2.30382276e-02,   1.35225277e-01,
         -9.09002868e-02,   4.97897561e-03,   1.35068569e-02,
         -2.06066780e-02,  -4.29718183e-02,   1.22002360e-02],
       [  7.33044471e-03,   2.42621879e-02,  -9.09002868e-02,
          2.72646847e-01,  -5.39866609e-03,  -5.90322698e-04,
          1.92618583e-02,   2.97661058e-02,   4.43216065e-03],
       [ -3.77938655e-02,   4.14370410e-02,   4.97897561e-03,
         -5.39866609e-03,   1.00801153e+00,  -9.65680678e-03,
          5.38461981e-03,  -6.62549302e-02,   3.24479852e-03],
       [ -3.79822153e-02,   2.50398586e-02,   1.35068569e-02,
         -5.90322698e-04,  -9.65680678e-03,   9.93050132e-01,
         -6.26190169e-03,  -1.39679803e-02,   6.49771561e-02],
       [ -2.47373108e-02,   1.79247155e-01,  -2.06066780e-02,
          1.92618583e-02,   5.38461981e-03,  -6.26190169e-03,
          1.01550951e+00,   1.19758930e-02,   4.72491681e-02],
       [ -3.31411276e-03,   2.81771097e-02,  -4.29718183e-02,
          2.97661058e-02,  -6.62549302e-02,  -1.39679803e-02,
          1.19758930e-02,   4.56128194e-02,   2.03661566e-02],
       [ -1.94640684e-02,   1.25442406e-02,   1.22002360e-02,
          4.43216065e-03,   3.24479852e-03,   6.49771561e-02,
          4.72491681e-02,   2.03661566e-02,   4.73283349e-02]]

    

nvars = len(cov[0])
corhist = TH2F('corhist', '', nvars, 0, nvars, nvars, 0, nvars )

for x in xrange(nvars) :
    corhist.GetXaxis().SetBinLabel( x+1, labels[x] )
    corhist.GetYaxis().SetBinLabel( x+1, labels[x] )
    
for irow in xrange(nvars) :
    for icol in xrange( nvars) :
        correlation = cov[irow][icol] / ( sqrt(cov[irow][irow]) * sqrt(cov[icol][icol]) )
        corhist.SetBinContent( irow+1, icol+1, correlation)

c = TCanvas('c', 'c', 700, 600)
corhist.SetMaximum(1.0)
corhist.SetMinimum(-1.0)
corhist.Draw('colz text')
    

c1.Print("correlations.pdf")
c1.Print("correlations.png")


