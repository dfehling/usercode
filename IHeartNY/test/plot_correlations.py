from ROOT import *

gStyle.SetOptStat(000000)
gStyle.SetPaintTextFormat( '.2f' )

labels = ['beta_signal', 'btag', 'jec', 'jer', 'lumi', 'pdf_CT10', 'rate_nonsemi', 'rate_qcd', 'rate_st', 'rate_vjets', 'scale', 'toptag']

cov =[[  1.71582833e-02,  -2.64841365e-02,  -1.64587805e-02,
          5.94357759e-03,  -2.31577440e-02,  -5.13985828e-02,
         -1.70264951e-02,  -3.44261488e-02,  -4.45523066e-03,
          1.89576571e-03,  -2.20832938e-03,  -3.72027402e-02],
       [ -2.64841365e-02,   9.26573772e-01,  -1.13356230e-02,
         -4.31534951e-03,   5.18216240e-03,   9.00277369e-03,
          1.26918966e-02,   9.82935812e-02,  -2.88056715e-03,
          2.80855915e-02,  -1.02415259e-02,   1.10991429e-01],
       [ -1.64587805e-02,  -1.13356230e-02,   2.23154367e-01,
         -6.61335224e-02,   7.63376951e-03,  -8.83501217e-03,
         -5.14368358e-03,   1.85382477e-02,   1.90815271e-02,
         -7.93771610e-02,   2.47816864e-03,   3.94303574e-02],
       [  5.94357759e-03,  -4.31534951e-03,  -6.61335224e-02,
          5.37667336e-01,  -2.53722634e-03,   1.11985041e-02,
         -1.85429362e-02,  -2.60147032e-02,   4.15190032e-03,
          7.85383765e-03,   1.32192357e-02,  -3.46296660e-02],
       [ -2.31577440e-02,   5.18216240e-03,   7.63376951e-03,
         -2.53722634e-03,   1.01075338e+00,   1.14853732e-02,
         -1.88022962e-02,  -5.99392130e-02,  -2.42981929e-02,
         -6.83041029e-02,  -7.49342770e-05,   9.37670614e-03],
       [ -5.13985828e-02,   9.00277369e-03,  -8.83501217e-03,
          1.11985041e-02,   1.14853732e-02,   3.87168097e-01,
          2.64885174e-02,   5.63856872e-02,   1.46356752e-02,
         -9.61667424e-03,  -2.84913655e-03,   3.86783506e-03],
       [ -1.70264951e-02,   1.26918966e-02,  -5.14368358e-03,
         -1.85429362e-02,  -1.88022962e-02,   2.64885174e-02,
          8.65351842e-01,  -8.45442691e-02,  -2.33677549e-02,
         -9.59465510e-03,  -1.73781471e-03,   3.50962682e-02],
       [ -3.44261488e-02,   9.82935812e-02,   1.85382477e-02,
         -2.60147032e-02,  -5.99392130e-02,   5.63856872e-02,
         -8.45442691e-02,   3.17553457e-01,  -7.91326778e-02,
         -2.02285322e-02,  -2.64480570e-02,   1.29732873e-01],
       [ -4.45523066e-03,  -2.88056715e-03,   1.90815271e-02,
          4.15190032e-03,  -2.42981929e-02,   1.46356752e-02,
         -2.33677549e-02,  -7.91326778e-02,   7.25564473e-01,
         -1.56522982e-02,   2.63044993e-03,  -1.21801039e-03],
       [  1.89576571e-03,   2.80855915e-02,  -7.93771610e-02,
          7.85383765e-03,  -6.83041029e-02,  -9.61667424e-03,
         -9.59465510e-03,  -2.02285322e-02,  -1.56522982e-02,
          5.47908093e-02,  -3.88333285e-04,   1.68839191e-02],
       [ -2.20832938e-03,  -1.02415259e-02,   2.47816864e-03,
          1.32192357e-02,  -7.49342770e-05,  -2.84913655e-03,
         -1.73781471e-03,  -2.64480570e-02,   2.63044993e-03,
         -3.88333285e-04,   5.53051300e-02,  -1.80885659e-02],
       [ -3.72027402e-02,   1.10991429e-01,   3.94303574e-02,
         -3.46296660e-02,   9.37670614e-03,   3.86783506e-03,
          3.50962682e-02,   1.29732873e-01,  -1.21801039e-03,
          1.68839191e-02,  -1.80885659e-02,   1.80149815e-01]]
    

    

nvars = len(cov[0])
corhist = TH2F('corhist', '', nvars, 0, nvars, nvars, 0, nvars )

for x in xrange(nvars) :
    corhist.GetXaxis().SetBinLabel( x+1, labels[x] )
    corhist.GetYaxis().SetBinLabel( x+1, labels[x] )
    
for irow in xrange(nvars) :
    for icol in xrange( nvars) :
        correlation = cov[irow][icol] / ( sqrt(cov[irow][irow]) * sqrt(cov[icol][icol]) )
        corhist.SetBinContent( irow+1, icol+1, correlation)

c = TCanvas('c', 'c', 700, 600)
corhist.SetMaximum(1.0)
corhist.SetMinimum(-1.0)
corhist.Draw('colz text')
    

c.Print("correlations.pdf")
c.Print("correlations.png")


