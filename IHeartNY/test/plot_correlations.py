from ROOT import *

gStyle.SetOptStat(000000)
gStyle.SetPaintTextFormat( '.2f' )

labels = ['beta_signal', 'btag', 'jec', 'jer', 'lumi', 'rate_nonsemi', 'rate_qcd', 'rate_st', 'rate_vjets', 'toptag']

cov = [[  8.79255089e-03,  -1.24911952e-02,  -2.03453175e-02,
          4.04666148e-03,  -2.25052543e-02,  -2.85899132e-02,
         -2.39211878e-03,  -9.22097357e-03,   8.14431159e-04,
         -2.64072283e-02],
       [ -1.24911952e-02,   9.23935316e-01,  -4.22978701e-02,
          2.53536808e-03,   6.83144872e-03,   4.56697865e-03,
          9.79238351e-02,   1.78874122e-02,   3.20864957e-02,
          3.61387015e-02],
       [ -2.03453175e-02,  -4.22978701e-02,   3.64119071e-01,
         -5.02844698e-02,   9.03329776e-03,   1.33322419e-02,
          3.76885643e-02,  -2.55450587e-02,  -1.41018306e-01,
          8.26419616e-03],
       [  4.04666148e-03,   2.53536808e-03,  -5.02844698e-02,
          2.80530506e-01,  -3.81500494e-04,  -1.43328443e-03,
         -8.52706796e-03,   1.77648896e-02,   7.98533427e-03,
         -9.86007566e-03],
       [ -2.25052543e-02,   6.83144872e-03,   9.03329776e-03,
         -3.81500494e-04,   1.00711670e+00,  -1.11922190e-02,
         -3.93772850e-02,  -2.55001629e-02,  -6.97195488e-02,
          6.73698170e-03],
       [ -2.85899132e-02,   4.56697865e-03,   1.33322419e-02,
         -1.43328443e-03,  -1.11922190e-02,   9.71952773e-01,
         -2.89566887e-02,  -3.76500045e-02,  -2.28353575e-02,
          1.01569745e-01],
       [ -2.39211878e-03,   9.79238351e-02,   3.76885643e-02,
         -8.52706796e-03,  -3.93772850e-02,  -2.89566887e-02,
          4.97369799e-01,  -4.51576243e-02,  -3.46215975e-02,
         -5.05891129e-02],
       [ -9.22097357e-03,   1.78874122e-02,  -2.55450587e-02,
          1.77648896e-02,  -2.55001629e-02,  -3.76500045e-02,
         -4.51576243e-02,   7.32981486e-01,  -3.46535177e-03,
          3.11756971e-02],
       [  8.14431159e-04,   3.20864957e-02,  -1.41018306e-01,
          7.98533427e-03,  -6.97195488e-02,  -2.28353575e-02,
         -3.46215975e-02,  -3.46535177e-03,   7.82472948e-02,
          3.27052299e-02],
       [ -2.64072283e-02,   3.61387015e-02,   8.26419616e-03,
         -9.86007566e-03,   6.73698170e-03,   1.01569745e-01,
         -5.05891129e-02,   3.11756971e-02,   3.27052299e-02,
          1.30465759e-01]]

    

nvars = len(cov[0])
corhist = TH2F('corhist', '', nvars, 0, nvars, nvars, 0, nvars )

for x in xrange(nvars) :
    corhist.GetXaxis().SetBinLabel( x+1, labels[x] )
    corhist.GetYaxis().SetBinLabel( x+1, labels[x] )
    
for irow in xrange(nvars) :
    for icol in xrange( nvars) :
        correlation = cov[irow][icol] / ( sqrt(cov[irow][irow]) * sqrt(cov[icol][icol]) )
        corhist.SetBinContent( irow+1, icol+1, correlation)

c = TCanvas('c', 'c', 700, 600)
corhist.SetMaximum(1.0)
corhist.SetMinimum(-1.0)
corhist.Draw('colz text')
    

c.Print("correlations.pdf")
c.Print("correlations.png")


