from ROOT import *

gStyle.SetOptStat(000000)
gStyle.SetPaintTextFormat( '.2f' )

labels = ['beta_signal', 'btag', 'jec', 'jer', 'lumi', 'rate_nonsemi', 'rate_st', 'rate_vjets', 'toptag']

cov = [[  8.42802788e-03,  -8.87043972e-03,  -2.13578661e-02,
          2.85578392e-03,  -2.24763572e-02,  -2.68044081e-02,
         -8.31352454e-03,   1.16524479e-03,  -2.47246927e-02],
       [ -8.87043972e-03,   8.97698053e-01,  -5.22837202e-02,
          3.48846825e-04,   2.08182959e-02,   1.46615320e-03,
          2.11678858e-02,   3.56977089e-02,   3.12385424e-02],
       [ -2.13578661e-02,  -5.22837202e-02,   3.69863400e-01,
         -2.56504283e-02,   1.41053408e-02,   1.78363352e-02,
         -2.16994781e-02,  -1.40399481e-01,   9.98069182e-03],
       [  2.85578392e-03,   3.48846825e-04,  -2.56504283e-02,
          2.74584961e-01,  -6.43924340e-04,  -1.34429881e-03,
          1.44082213e-02,  -2.02620622e-03,  -1.10259310e-02],
       [ -2.24763572e-02,   2.08182959e-02,   1.41053408e-02,
         -6.43924340e-04,   9.96193561e-01,  -1.64445169e-02,
         -3.31119274e-02,  -7.44698323e-02,  -1.36797890e-03],
       [ -2.68044081e-02,   1.46615320e-03,   1.78363352e-02,
         -1.34429881e-03,  -1.64445169e-02,   9.42544327e-01,
         -3.65793820e-02,  -2.54333128e-02,   9.05965992e-02],
       [ -8.31352454e-03,   2.11678858e-02,  -2.16994781e-02,
          1.44082213e-02,  -3.31119274e-02,  -3.65793820e-02,
          7.10520001e-01,  -6.36586347e-03,   2.41158127e-02],
       [  1.16524479e-03,   3.56977089e-02,  -1.40399481e-01,
         -2.02620622e-03,  -7.44698323e-02,  -2.54333128e-02,
         -6.36586347e-03,   7.67561451e-02,   2.98507702e-02],
       [ -2.47246927e-02,   3.12385424e-02,   9.98069182e-03,
         -1.10259310e-02,  -1.36797890e-03,   9.05965992e-02,
          2.41158127e-02,   2.98507702e-02,   1.19727817e-01]]

    

nvars = len(cov[0])
corhist = TH2F('corhist', '', nvars, 0, nvars, nvars, 0, nvars )

for x in xrange(nvars) :
    corhist.GetXaxis().SetBinLabel( x+1, labels[x] )
    corhist.GetYaxis().SetBinLabel( x+1, labels[x] )
    
for irow in xrange(nvars) :
    for icol in xrange( nvars) :
        correlation = cov[irow][icol] / ( sqrt(cov[irow][irow]) * sqrt(cov[icol][icol]) )
        corhist.SetBinContent( irow+1, icol+1, correlation)

c = TCanvas('c', 'c', 700, 600)
corhist.SetMaximum(1.0)
corhist.SetMinimum(-1.0)
corhist.Draw('colz text')
    

c.Print("correlations.pdf")
c.Print("correlations.png")


