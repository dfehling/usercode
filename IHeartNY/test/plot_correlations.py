from ROOT import *

gStyle.SetOptStat(000000)
gStyle.SetPaintTextFormat( '.2f' )

labels = ['beta_signal', 'btag', 'jec', 'jer', 'lumi', 'rate_nonsemi', 'rate_qcd', 'rate_st', 'rate_vjets', 'toptag']

cov =[[ 0.00964912, -0.0209484 , -0.02163951,  0.00990188, -0.0211094 ,
        -0.01696878, -0.02971047, -0.00226468,  0.00404137, -0.03699008],
       [-0.0209484 ,  0.92141057, -0.02421105, -0.00566768,  0.00421343,
         0.01122292,  0.08744763, -0.00305174,  0.02591592,  0.09436415],
       [-0.02163951, -0.02421105,  0.29919842, -0.07726636,  0.01056847,
         0.01036488,  0.02930124,  0.01303412, -0.10567117,  0.05130995],
       [ 0.00990188, -0.00566768, -0.07726636,  0.53868507, -0.00380387,
        -0.02817367, -0.02635432,  0.00495539,  0.01120144, -0.039052  ],
       [-0.0211094 ,  0.00421343,  0.01056847, -0.00380387,  1.01042556,
        -0.01902381, -0.05951537, -0.02598493, -0.06936709,  0.01067031],
       [-0.01696878,  0.01122292,  0.01036488, -0.02817367, -0.01902381,
         0.87756839, -0.08212773, -0.0291801 , -0.01759951,  0.04531091],
       [-0.02971047,  0.08744763,  0.02930124, -0.02635432, -0.05951537,
        -0.08212773,  0.3258477 , -0.0805477 , -0.02409432,  0.13501539],
       [-0.00226468, -0.00305174,  0.01303412,  0.00495539, -0.02598493,
        -0.0291801 , -0.0805477 ,  0.71729031, -0.01367995, -0.00121214],
       [ 0.00404137,  0.02591592, -0.10567117,  0.01120144, -0.06936709,
        -0.01759951, -0.02409432, -0.01367995,  0.05927425,  0.00573559],
       [-0.03699008,  0.09436415,  0.05130995, -0.039052  ,  0.01067031,
         0.04531091,  0.13501539, -0.00121214,  0.00573559,  0.18149066]]
    

    

nvars = len(cov[0])
corhist = TH2F('corhist', '', nvars, 0, nvars, nvars, 0, nvars )

for x in xrange(nvars) :
    corhist.GetXaxis().SetBinLabel( x+1, labels[x] )
    corhist.GetYaxis().SetBinLabel( x+1, labels[x] )
    
for irow in xrange(nvars) :
    for icol in xrange( nvars) :
        correlation = cov[irow][icol] / ( sqrt(cov[irow][irow]) * sqrt(cov[icol][icol]) )
        corhist.SetBinContent( irow+1, icol+1, correlation)

c = TCanvas('c', 'c', 700, 600)
corhist.SetMaximum(1.0)
corhist.SetMinimum(-1.0)
corhist.Draw('colz text')
    

c.Print("correlations.pdf")
c.Print("correlations.png")


